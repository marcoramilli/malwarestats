onmessage = function(e){
  //Please Add controlts Here !!!!!
  var err         = e.data[0];
  var data        = e.data[1];
  var filter      = e.data[2];

  if (err){
    console.log('ERROR: ', err);
  } else {
    var data_out = new Array();
    var i_1 = 0;
    var i_2 = 0;

    if (data){
      while (i_1 < data.length){
        if (null != data[i_1] && undefined != data[i_1] && undefined != data[i_1][filter] && null != data[i_1][filter]){
          if (data[i_1][filter][0] === undefined ){
            //data_out.push({filter: "Not Detected", "result": data[i_1].result});
          } else {
            for (var j=0; j<data[i_1][filter].length; j++){
              if (null != data[i_1][filter][j] && undefined != data[i_1][filter][j]){
                var s = 0;
                for (var index=0; index < data_out.length; index++){
                  if (undefined === data[index])
                    break;;
                  var current = data[index];
                  if (current[filter] == data[i_1][filter][j]){
                    current.result = current.result + data[i_1].result;
                    s = 1;
                    break;;
                  } 
                }//looking for dups
                if (!s){
                  data_out.push({filter: data[i_1][filter][j], "result": data[i_1].result });
                  s = 0;
                }
              }//if data exists
            } 
          }
        }
        i_1++;
      }
      postMessage(data_out);
    }
  }
}//mainfunction


